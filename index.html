<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthCheck - Twoje Centrum Zdrowia</title>
    <style>
        :root {
            --primary: #2A9D8F; /* Morski turkus - kojarzy si ze zdrowiem */
            --secondary: #264653;
            --bg: #F8F9FA;
            --card-bg: #FFFFFF;
            --text: #333333;
            --text-light: #666666;
            --radius: 12px;
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        header h1 {
            color: var(--secondary);
            font-weight: 300;
            font-size: 2.5rem;
            letter-spacing: -1px;
        }

        header p {
            color: var(--text-light);
        }

        /* Grid dla kart */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Styl kart */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .card h2 {
            font-size: 1.25rem;
            margin-bottom: 20px;
            color: var(--secondary);
            border-bottom: 2px solid var(--bg);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Formularze */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        button:hover {
            background-color: #21867a;
        }

        button.secondary-btn {
            background-color: transparent;
            color: var(--text-light);
            border: 1px solid #ddd;
            margin-top: 10px;
        }
        
        button.secondary-btn:hover {
            background-color: #f0f0f0;
        }

        /* Wyniki */
        .result-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0fdfa;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            display: none; /* Domylnie ukryte */
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary);
        }

        .result-desc {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Specyficzne dla Pulsometru */
        #tap-area {
            height: 120px;
            background-color: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            margin-bottom: 15px;
            transition: background 0.1s;
        }

        #tap-area:active {
            background-color: #e9ecef;
            border-color: var(--primary);
        }

        .pulse-animation {
            animation: pulse-effect 0.2s ease-out;
        }

        @keyframes pulse-effect {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        footer {
            margin-top: 50px;
            text-align: center;
            font-size: 0.8rem;
            color: #999;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            header h1 { font-size: 2rem; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>HealthCheck</h1>
        <p>Minimalistyczny zestaw narzdzi do monitorowania parametr贸w zdrowotnych.</p>
    </header>

    <div class="grid">
        <div class="card">
            <h2>Kalkulator BMI <span>锔</span></h2>
            <div class="form-group">
                <label for="bmi-weight">Waga (kg)</label>
                <input type="number" id="bmi-weight" placeholder="np. 70">
            </div>
            <div class="form-group">
                <label for="bmi-height">Wzrost (cm)</label>
                <input type="number" id="bmi-height" placeholder="np. 175">
            </div>
            <button onclick="calculateBMI()">Oblicz BMI</button>
            
            <div id="bmi-result" class="result-box">
                <div class="result-value" id="bmi-value">0</div>
                <div class="result-desc" id="bmi-desc">Norma</div>
            </div>
        </div>

        <div class="card">
            <h2>Pulsometr (Tap) <span>わ</span></h2>
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">
                Instrukcja: Znajd藕 sw贸j puls na nadgarstku lub szyi. Klikaj w szare pole rytmicznie z ka偶dym uderzeniem serca przez ok. 10 sekund.
            </p>
            <div id="tap-area" onclick="handleTap()">
                <span id="tap-text">Klikaj tutaj w rytm serca</span>
            </div>
            <div class="result-value" style="text-align: center;" id="bpm-display">-- BPM</div>
            <button class="secondary-btn" onclick="resetPulse()">Resetuj licznik</button>
        </div>

        <div class="card">
            <h2>Zapotrzebowanie na wod <span></span></h2>
            <div class="form-group">
                <label for="water-weight">Waga (kg)</label>
                <input type="number" id="water-weight" placeholder="np. 70">
            </div>
            <div class="form-group">
                <label for="water-activity">Czas aktywnoci fizycznej (min)</label>
                <input type="number" id="water-activity" value="0" placeholder="np. 30">
            </div>
            <button onclick="calculateWater()">Oblicz</button>

            <div id="water-result" class="result-box">
                <div class="result-value" id="water-value">0 ml</div>
                <div class="result-desc">Dzienne szacunkowe zapotrzebowanie</div>
            </div>
        </div>
    </div>

    <footer>
        <p><strong>Uwaga:</strong> Ta strona su偶y wycznie celom informacyjnym i nie zastpuje profesjonalnej porady medycznej. Algorytmy opieraj si na og贸lnych wzorach (BMI wg WHO, woda wg przelicznika 30ml/kg).</p>
    </footer>
</div>

<script>
    /* --- LOGIKA BMI --- */
    function calculateBMI() {
        const weight = parseFloat(document.getElementById('bmi-weight').value);
        const heightCm = parseFloat(document.getElementById('bmi-height').value);
        const resultBox = document.getElementById('bmi-result');
        const valueDisplay = document.getElementById('bmi-value');
        const descDisplay = document.getElementById('bmi-desc');

        if (!weight || !heightCm || weight <= 0 || heightCm <= 0) {
            alert("Prosz poda prawidow wag i wzrost.");
            return;
        }

        // Konwersja cm na metry
        const heightM = heightCm / 100;
        // Wz贸r: kg / m^2
        const bmi = (weight / (heightM * heightM)).toFixed(1);

        let desc = "";
        let color = "";

        if (bmi < 18.5) {
            desc = "Niedowaga";
            color = "#3498db";
        } else if (bmi >= 18.5 && bmi < 25) {
            desc = "Waga prawidowa";
            color = "#2A9D8F";
        } else if (bmi >= 25 && bmi < 30) {
            desc = "Nadwaga";
            color = "#f39c12";
        } else {
            desc = "Otyo";
            color = "#e74c3c";
        }

        valueDisplay.textContent = bmi;
        descDisplay.textContent = desc;
        descDisplay.style.color = color;
        resultBox.style.display = "block";
    }

    /* --- LOGIKA PULSOMETRU (TAP TEMPO) --- */
    let taps = [];
    const TIMEOUT = 2000; // Resetuj, jeli przerwa > 2 sekundy

    function handleTap() {
        const now = Date.now();
        const tapArea = document.getElementById('tap-area');
        
        // Efekt wizualny
        tapArea.classList.remove('pulse-animation');
        void tapArea.offsetWidth; // trigger reflow
        tapArea.classList.add('pulse-animation');

        // Reset jeli duga przerwa
        if (taps.length > 0 && now - taps[taps.length - 1] > TIMEOUT) {
            taps = [];
        }

        taps.push(now);

        // Zachowaj tylko ostatnie 10 klikni dla lepszej redniej ruchomej
        if (taps.length > 10) {
            taps.shift();
        }

        updateBPM();
    }

    function updateBPM() {
        const bpmDisplay = document.getElementById('bpm-display');
        const tapText = document.getElementById('tap-text');

        if (taps.length < 2) {
            tapText.textContent = "Klikaj dalej...";
            bpmDisplay.textContent = "-- BPM";
            return;
        }

        // Oblicz redni odstp midzy stukniciami
        let intervals = [];
        for (let i = 1; i < taps.length; i++) {
            intervals.push(taps[i] - taps[i-1]);
        }

        let averageInterval = intervals.reduce((a, b) => a + b) / intervals.length;
        
        // 60000 ms w minucie / redni interwa w ms
        let bpm = Math.round(60000 / averageInterval);

        bpmDisplay.textContent = bpm + " BPM";
        tapText.textContent = "Utrzymuj rytm...";
    }

    function resetPulse() {
        taps = [];
        document.getElementById('bpm-display').textContent = "-- BPM";
        document.getElementById('tap-text').textContent = "Klikaj tutaj w rytm serca";
    }

    /* --- LOGIKA WODY (Dodatkowa) --- */
    function calculateWater() {
        const weight = parseFloat(document.getElementById('water-weight').value);
        const activity = parseFloat(document.getElementById('water-activity').value) || 0;
        const resultBox = document.getElementById('water-result');
        const valueDisplay = document.getElementById('water-value');

        if (!weight || weight <= 0) {
            alert("Prosz poda wag.");
            return;
        }

        // Prosty wz贸r: 30ml na ka偶dy kg masy ciaa
        let waterNeed = weight * 30;

        // Dodatek za aktywno: ok 350ml na ka偶de 30 min aktywnoci (urednione)
        if (activity > 0) {
            waterNeed += (activity / 30) * 350;
        }

        valueDisplay.textContent = Math.round(waterNeed) + " ml";
        resultBox.style.display = "block";
    }
</script>

</body>
</html>
